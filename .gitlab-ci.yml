stages:
  - validate
  - plan
  - apply
  - ansible
  - destroy

before_script:
  - echo "token = \"$token\"" >> terraform.tfvars 

include:
  - project: 'developerdurp/yml-templates' 
    ref: 'main'
    file: 
      - 'terraform.yml'
      - 'ansible.yml'

plan production:
  extends: .plan production

apply:
 extends: .apply
 artifacts:
   - $CI_PROJECT_DIR

destroy:
 extends: .destroy
